# =============================================================================
# requirements.txt for Graph RAG System with Multi-Document Support
# =============================================================================
# Python: 3.11
# All packages needed for production deployment
# =============================================================================

# -------------------------------------------------
#  PyTorch Index (for CUDA 12.4 wheels)
# -------------------------------------------------
-f https://download.pytorch.org/whl/cu124

# -------------------------------------------------
#  Core Web Framework
# -------------------------------------------------
fastapi==0.109.0
uvicorn[standard]==0.27.0
python-multipart==0.0.6
pydantic==2.5.3
aiofiles==23.2.1

# -------------------------------------------------
#  Database Clients
# -------------------------------------------------
# MongoDB (for backward compatibility)
pymongo==4.6.1

# Neo4j (Graph Database) - NEW Architecture
neo4j>=5.15.0

# Redis (Caching & Session Store) - NEW Architecture
redis>=5.0.0

# MySQL (External Authentication) - NEW Architecture
pymysql>=1.1.0

# ArangoDB (Graph Database) - Legacy (backward compatibility)
pyArango==2.1.1
python-arango==8.2.2

# Qdrant (Vector Database) - REQUIRED for Graph RAG
qdrant-client==1.11.1

# -------------------------------------------------
#  PDF Processing & OCR
#  CRITICAL: pdfminer.six version MUST be compatible with unstructured
# -------------------------------------------------
pdfminer.six==20231228
unstructured[local-inference]==0.12.0
pdf2image==1.17.0
pytesseract>=0.3.10
opencv-python-headless>=4.8.0
Pillow>=10.0.0

# -------------------------------------------------
#  PyTorch & Deep Learning
# -------------------------------------------------
torch==2.5.0
torchvision==0.20.0
torchaudio==2.5.0

# Transformers & NLP
transformers>=4.36.0
tokenizers>=0.15.0
accelerate>=0.25.0

# Sentence Transformers (for embeddings) - REQUIRED for Graph RAG
sentence-transformers>=3.0.0

# -------------------------------------------------
#  AI/LLM Integration
# -------------------------------------------------
requests>=2.31.0
httpx>=0.25.0
openai>=1.3.0
anthropic>=0.7.0

# -------------------------------------------------
#  Graph RAG Specific Dependencies
# -------------------------------------------------
# Text processing
nltk>=3.8.1
spacy>=3.7.0
python-Levenshtein>=0.25.0

# Data processing
pandas>=2.0.0
numpy<2.0.0
scipy>=1.11.0

# JSON handling
orjson>=3.9.0

# Async support
asyncio>=3.4.3
aiohttp>=3.9.0

# -------------------------------------------------
#  Utilities
# -------------------------------------------------
python-dotenv>=1.0.0
click>=8.1.7
tqdm>=4.66.0
tenacity>=8.2.3
python-dateutil>=2.8.2
pytz>=2023.3
pathlib2>=2.3.7
watchdog>=3.0.0
colorlog>=6.8.0
loguru>=0.7.2

# -------------------------------------------------
#  Security & Authentication
# -------------------------------------------------
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
cryptography>=41.0.7
bcrypt>=4.1.2
PyJWT>=2.8.0

# -------------------------------------------------
#  Data & Compatibility
# -------------------------------------------------
matplotlib>=3.7.0
onnxruntime-gpu>=1.16.0
marshmallow>=3.20.0
jsonschema>=4.20.0
msgpack>=1.0.7
zstandard>=0.22.0
lz4>=4.3.2
cachetools>=5.3.2

# Version constraints
setuptools>=68.0.0
wheel>=0.42.0
protobuf>=4.23.0,<5.0.0
typing-extensions>=4.8.0
chardet>=5.2.0
charset-normalizer>=3.3.0
urllib3>=2.0.0,<3.0.0
certifi>=2023.11.17

# =============================================================================
# Installation Notes:
# =============================================================================
# 1. Install order is managed automatically by pip
# 2. pdfminer.six MUST be 20231228 for unstructured compatibility
# 3. pyArango 2.1.1 is latest stable version
# 4. numpy<2.0.0 constraint for compatibility with other packages
# 5. protobuf<5.0.0 constraint for gRPC compatibility
#
# Installation command:
#   pip install --no-cache-dir -r requirements.txt
#
# Verification:
#   python -c "from pdfminer.pdfparser import PSSyntaxError; print('âœ“')"
#   python -c "import pyArango; print(pyArango.__version__)"
# =============================================================================