# =============================================================================
# Simorgh Industrial Electrical Assistant - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# =============================================================================

# -----------------------------------------------------------------------------
# GITHUB CONTAINER REGISTRY
# -----------------------------------------------------------------------------
GITHUB_REPOSITORY_OWNER=your-github-username
IMAGE_TAG=latest

# -----------------------------------------------------------------------------
# NEO4J - KNOWLEDGE GRAPH DATABASE
# -----------------------------------------------------------------------------
NEO4J_URI=bolt://neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=simorgh_secure_2024

# Neo4j Memory Settings (Optional - already set in docker-compose)
# NEO4J_HEAP_INITIAL=512m
# NEO4J_HEAP_MAX=2G
# NEO4J_PAGECACHE=512m

# -----------------------------------------------------------------------------
# REDIS - CACHING & SESSION STORE
# -----------------------------------------------------------------------------
REDIS_URL=redis://redis:6379/0
REDIS_CHAT_DB=1
REDIS_CACHE_DB=2
REDIS_AUTH_DB=3

# Redis Memory Limit (Optional - already set in docker-compose)
# REDIS_MAXMEMORY=512mb

# -----------------------------------------------------------------------------
# QDRANT - VECTOR DATABASE
# -----------------------------------------------------------------------------
QDRANT_URL=http://qdrant:6333

# Qdrant Collection Settings
QDRANT_COLLECTION_SIZE=768
QDRANT_DISTANCE_METRIC=cosine

# -----------------------------------------------------------------------------
# COCOINDEX - DATA FRAMEWORK
# -----------------------------------------------------------------------------
COCOINDEX_URL=http://cocoindex:8080
COCOINDEX_DB_PASSWORD=cocoindex_2024

# CocoIndex PostgreSQL
COCOINDEX_DATABASE_URL=postgresql://cocoindex:cocoindex_2024@cocoindex_db:5432/cocoindex

# -----------------------------------------------------------------------------
# MYSQL - EXTERNAL AUTHENTICATION (READ-ONLY)
# -----------------------------------------------------------------------------
# Can also use SQL_SERVER_* for backward compatibility
MYSQL_HOST=your_mysql_server_ip_or_hostname
MYSQL_PORT=3306
MYSQL_USER=readonly_user
MYSQL_PASSWORD=your_readonly_password
MYSQL_DATABASE=your_database_name

# Example:
# MYSQL_HOST=192.168.1.148
# MYSQL_PORT=3306
# MYSQL_USER=technical
# MYSQL_PASSWORD=your_password
# MYSQL_DATABASE=projects

# -----------------------------------------------------------------------------
# LLM CONFIGURATION - HYBRID SUPPORT
# -----------------------------------------------------------------------------

# OpenAI API (Online Mode)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o
# Alternative models: gpt-4-turbo, gpt-3.5-turbo

# Local LLM Servers (Offline Mode)
LOCAL_LLM_URL_1=http://192.168.1.61/ai
LOCAL_LLM_URL_2=http://192.168.1.62/ai

# Default LLM Mode (online, offline, auto)
DEFAULT_LLM_MODE=online

# LLM Settings
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000
LLM_CACHE_TTL=3600

# -----------------------------------------------------------------------------
# EMBEDDING MODEL
# -----------------------------------------------------------------------------
EMBEDDING_MODEL=sentence-transformers/all-mpnet-base-v2
EMBEDDING_DIMENSION=768

# -----------------------------------------------------------------------------
# BACKEND API SETTINGS
# -----------------------------------------------------------------------------
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8890
BACKEND_WORKERS=4

# API Settings
API_TIMEOUT=600
MAX_UPLOAD_SIZE=104857600  # 100MB in bytes

# -----------------------------------------------------------------------------
# FRONTEND SETTINGS
# -----------------------------------------------------------------------------
VITE_API_URL=/api
CHOKIDAR_USEPOLLING=true

# -----------------------------------------------------------------------------
# AUTHORIZATION CACHING
# -----------------------------------------------------------------------------
AUTH_CACHE_TTL=3600  # 1 hour in seconds

# -----------------------------------------------------------------------------
# CHAT HISTORY SETTINGS
# -----------------------------------------------------------------------------
CHAT_HISTORY_MAX_MESSAGES=100
CHAT_HISTORY_TTL=86400  # 24 hours

# -----------------------------------------------------------------------------
# FILE UPLOAD SETTINGS
# -----------------------------------------------------------------------------
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=100  # MB
ALLOWED_EXTENSIONS=.pdf,.docx,.xlsx,.txt,.csv

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FILE=/app/logs/app.log

# -----------------------------------------------------------------------------
# TIMEZONE
# -----------------------------------------------------------------------------
TZ=Asia/Tehran

# -----------------------------------------------------------------------------
# POSTGRESQL - MODERN AUTHENTICATION DATABASE
# -----------------------------------------------------------------------------
POSTGRES_AUTH_HOST=postgres_auth
POSTGRES_AUTH_PORT=5432
POSTGRES_AUTH_DATABASE=simorgh_auth
POSTGRES_AUTH_USER=simorgh
POSTGRES_AUTH_PASSWORD=simorgh_secure_2024
POSTGRES_MIN_CONNECTIONS=2
POSTGRES_MAX_CONNECTIONS=20

# -----------------------------------------------------------------------------
# SECURITY & JWT AUTHENTICATION
# -----------------------------------------------------------------------------
# IMPORTANT: Change this in production!
JWT_SECRET_KEY=your-secret-key-change-in-production-use-random-256bit
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60  # 1 hour for access tokens
REFRESH_TOKEN_EXPIRE_DAYS=30    # 30 days for refresh tokens

# Rate Limiting
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30

# -----------------------------------------------------------------------------
# GOOGLE OAUTH 2.0
# -----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:5173/auth/google/callback

# -----------------------------------------------------------------------------
# EMAIL SERVICE
# -----------------------------------------------------------------------------
EMAIL_PROVIDER=smtp  # smtp, sendgrid
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true
FROM_EMAIL=noreply@simorgh.ai
FROM_NAME=Simorgh AI

# SendGrid (alternative to SMTP)
# SENDGRID_API_KEY=SG.your-sendgrid-api-key

# Frontend URL (for email links)
FRONTEND_URL=http://localhost:5173

# Cookie settings
SECURE_COOKIES=false  # Set to true in production with HTTPS
# COOKIE_DOMAIN=.yourdomain.com

# -----------------------------------------------------------------------------
# CORS SETTINGS (Optional)
# -----------------------------------------------------------------------------
# CORS_ORIGINS=http://localhost:5173,http://192.168.1.68
# CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# MONITORING (Optional)
# -----------------------------------------------------------------------------
# ENABLE_METRICS=true
# METRICS_PORT=9090

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
ENABLE_GRAPH_RAG=true
ENABLE_DOCUMENT_PROCESSING=true
ENABLE_SQL_AUTH=true
ENABLE_REDIS_CACHE=true

# -----------------------------------------------------------------------------
# DEVELOPMENT SETTINGS (Optional)
# -----------------------------------------------------------------------------
# DEBUG=false
# RELOAD=false

# =============================================================================
# NOTES
# =============================================================================
#
# 1. Neo4j Configuration:
#    - Default credentials are neo4j/simorgh_secure_2024
#    - Change NEO4J_PASSWORD for production
#    - Access Neo4j Browser at http://192.168.1.68:7474
#
# 2. Redis Configuration:
#    - DB 0: User sessions & profiles
#    - DB 1: Chat history
#    - DB 2: LLM response caching
#    - DB 3: Authorization caching
#
# 3. SQL Server Authentication:
#    - Requires read-only access to user/project tables
#    - Used for validating project access permissions
#    - Results are cached in Redis for performance
#
# 4. LLM Modes:
#    - online: Uses OpenAI API (requires OPENAI_API_KEY)
#    - offline: Uses local LLM servers (192.168.1.61, 192.168.1.62)
#    - auto: Tries online first, falls back to offline on failure
#
# 5. Local LLM Servers:
#    - Primary: 192.168.1.61
#    - Fallback: 192.168.1.62
#    - Both servers should expose /ai/chat endpoint
#
# 6. CocoIndex:
#    - Used for document processing and entity extraction
#    - Flows should be placed in ./cocoindex_flows/
#
# 7. Security:
#    - Change all default passwords for production
#    - Use environment-specific .env files
#    - Never commit .env to version control
#
# =============================================================================
